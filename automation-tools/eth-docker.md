# ETH Docker

## VM/Hardware Setup

You will need to prepare your virtual machine (VM) or home staking hardware for all options below. Step-by-step guide below.

{% content-ref url="../hardware-and-systems-setup/assemble-your-hardware/practicing-on-cloud-vms.md" %}
[practicing-on-cloud-vms.md](../hardware-and-systems-setup/assemble-your-hardware/practicing-on-cloud-vms.md)
{% endcontent-ref %}

{% content-ref url="../hardware-and-systems-setup/assemble-your-hardware/" %}
[assemble-your-hardware](../hardware-and-systems-setup/assemble-your-hardware/)
{% endcontent-ref %}

## Solo Staking testnet workflow

### Prepare your VM/Hardware

Create a new Google Cloud account to unlock $300 of free cloud credits.

Create a VM on the Google Cloud Console (or any other cloud provider) with the following machine specifications.

* CPU: 2 vCPU
* RAM: 8GB
* Disk: 350GB SSD
* OS: Ubuntu 24.04 LTS
* Enable HTTP & HTTPS traffic

{% hint style="info" %}
Estimated cost per month on Google Cloud = $84, or _**3.5 months of free practice time**_ with $300 of cloud credits&#x20;
{% endhint %}

### Download & configure ETH Docker

**SSH into your VM/hardware:** Click on the dropdown beside the **"SSH"** column and select **"Open in browser window".** Click on **"Authorize"** when prompted.

<figure><img src="https://dvt-homestaker.stakesaurus.com/~gitbook/image?url=https%3A%2F%2F1628445806-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-x-prod.appspot.com%2Fo%2Fspaces%252FoML8XLjdWBoYbtGBoQ9R%252Fuploads%252F67CExXgVAXX8He9QB978%252Fimage.png%3Falt%3Dmedia%26token%3D76052e50-b3d8-4ef4-b143-ac07a32f45fb&#x26;width=768&#x26;dpr=4&#x26;quality=100&#x26;sign=8d7c4d17&#x26;sv=1" alt=""><figcaption></figcaption></figure>

Go to the [ETH Docker repository ](https://ethdocker.com/Usage/QuickStart)and to get and run the installation commands. Run the next 2 commands in sequence.

```sh
cd ~ && git clone https://github.com/eth-educators/eth-docker.git && cd eth-docker
```

```sh
sudo ./ethd install
```

Exit your virtual machine/hardware and re-login to add your host user into the docker user group.

```sh
exit
```

Next, configure the ETH Docker service.

<pre class="language-sh"><code class="lang-sh"><strong>cd ~/eth-docker/
</strong><strong>./ethd config
</strong></code></pre>

**Follow along the prompts in the terminal UI (TUI) to:**

1. Choose `HoleÅ¡ovice Testnet` >> `Ethereum node - consensus, execution and validator client`
2. Select the **Nimbus** (Consensus) and **Nethermind** (Execution) for the client choices
3. Use the `provided URL` for **Checkpoint Sync**, select `yes` for **MEV Boost**, `use default` **relay**, `yes` for **Grafana dashboards**
4. Set `Rewards Address` to an ERC-20 wallet address that you control (e.g., Metamask, hardware wallet)
5. `use default` **Graffiti**, `yes` for **generate validator keys**

#### ETH Docker TUI Navigation

1. `Arrow keys & Tab key`: Cycle options
2. `Space bar`: Select option
3. `Enter`: Confirm option
4. `CTRL+B`, then `D`: Exit split-screen monitoring view
5. `CTRL+C`: Exit individual screen monitoring view
6. `exit` command (type "exit" and `enter` in terminal) : Exit current terminal

### Add validator key generation tool

```sh
cd ~/eth-docker
nano .env
```

### Generate validator keys

```sh
cd ~/eth-docker
./ethd cmd run --rm deposit-cli-new --execution_address <YOURHARDWAREWALLETADDRESS> --uid $(id -u)
```

Replace `<YOURHARDWAREWALLETADDRESS>` (_**including the "< >"**_) with your actual ERC-20 wallet address (e.g., Metamask, hardware wallet).

**Follow the TUI prompts:**

* Choose language
* Confirm withdrawal (execution layer) address
* Number of validator keys to generate
* Set password to encrypt validator keys - No "\*\*\*\*" will be displayed so make sure to type your password carefully.
* Save the 24-word mnemonic securely

Your validator keys will be saved in the `~/eth-docker/.eth/validator_keys` folder.

### Start ETH Docker

<pre class="language-sh"><code class="lang-sh">cd ~/eth-docker
<strong>./ethd up
</strong></code></pre>

### Import validator keys

Change the user permissions of the folder containing your validator keys. Replace \<user> with your actual username of your VM.

```sh
sudo chown -R <user>:<user> ~/eth-docker/.eth/validator_keys
```

**Tip:** To find username, look to the terminal of your sever/node. Every character before the `@` is your username

Next, import the generated validator keys onto your validator client

```
ethd keys import
```

### Upload deposit data

Copy the deposit data generated by the command below for uploading onto the [CSM Widget](https://csm.testnet.fi/).

```
cat ~/eth-docker/.eth/validator_keys/deposit*json
```

Example:

{% hint style="success" %}
\[{"pubkey": "b72e61268081e28b583d78876cc1687d72be4c3592de1f9d585c96b4c64b25b49174f04ae6e55eb1e59247cb575c0157", "withdrawal\_credentials": "010000000000000000000000f0179dec45a37423ead4fad5fcb136197872ead9", "amount": 32000000000, "signature": "8bb6e8838d15ea0ea23ed5151436ea07b65a0530ccfa9f5154b1fa394827df5add81510cf3463b79a387b0dffbe43ae417ea53b844b43d6a249fbc153fa1deda9fc089f218a845e382aa7455d804650e0e03232d3dad36b180bbdacd908f286c", "deposit\_message\_root": "8dbda15641eb7be3573f7377d10634c93c2b1dceb9fb6e519ec54ae0286d04c7", "deposit\_data\_root": "43f215ce19df49591db322bd4966667afc2a226a0a9812e5d60e31c60223991c", "fork\_version": "01017000", "network\_name": "holesky", "deposit\_cli\_version": "2.7.0"}]
{% endhint %}

{% content-ref url="../bonded-validators-setup/lido-csm/upload-remove-view-validator-keys.md" %}
[upload-remove-view-validator-keys.md](../bonded-validators-setup/lido-csm/upload-remove-view-validator-keys.md)
{% endcontent-ref %}

### View logs

Monitor the logs of your validator node to make sure that it is syncing (or synced) with no errors while you wait for Lido to provision your validator deposit with 32 ETH.

View logs of each docker container.

```
ethd logs <container_name> -f --tail 20
```

**Flags:**

* `-f`: Follow along the logs in real time. `CTRL+C` to exit monitoring view
* `--tail`: Print the last N lines of the logs.

Choose one to replace the `<container_name>` above.

```
blackbox-exporter          consensus                  execution                  json-exporter              node-exporter              promtail
cadvisor                   ethereum-metrics-exporter  grafana                    loki                       prometheus                 validator
```

### Useful commands

Run `ethd help` to print all available command line options. Common options:

* Update all clients & ETH Docker stack: `ethd update`
* Stop ETH Docker: `ethd down`
* Restart ETH Docker: `ethd restart`
* Restart from scratch: e`thd terminate`&#x20;

## Support

{% embed url="https://t.me/stakesaurus" %}

## Donations

#### If you found this helpful, consider supporting Stakesaurus in one of few ways [here](https://dvt-homestaker.stakesaurus.com/#if-you-found-this-helpful-consider-supporting-stakesaurus-in-one-of-two-ways-below)!
